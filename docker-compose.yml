services:
  web:
    extends:
      file: docker-compose.base.yml
      service: web
    image: ghcr.io/chiballc/manyumba_web
    labels:
      - com.centurylinklabs.watchtower.enable="true"

  db:
    extends:
      file: docker-compose.base.yml
      service: db

  docs:
    extends:
      file: docker-compose.base.yml
      service: docs
    image: ghcr.io/chiballc/manyumba_docs
    labels:
      - com.centurylinklabs.watchtower.enable="true"

  nginx:
    extends:
      file: docker-compose.base.yml
      service: nginx

  watchtower:
    image: containrrr/watchtower
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    command:
      - --label-enable

volumes:
  postgres_data:
